CREATE TABLE IF NOT EXISTS Usuario(
	id_usuario serial PRIMARY KEY,
	nome varchar(50) UNIQUE NOT NULL,
	senha VARCHAR (50) NOT NULL,
	criado_em TIMESTAMP NOT NULL,
	ultimo_acesso TIMESTAMP
);

CREATE TABLE IF NOT EXISTS Grana(
	id_grana serial PRIMARY KEY,
	nome varchar(50) UNIQUE NOT NULL,
	id_usuario integer NOT NULL,
	criado_em TIMESTAMP NOT NULL,
	ultima_modificacao TIMESTAMP,
	codigo_de_acesso varchar(256),
	CONSTRAINT usuario_fk FOREIGN KEY (id_usuario) REFERENCES Usuario (id_usuario) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE TABLE IF NOT EXISTS Gasto(
	id_gasto serial PRIMARY KEY,
	id_grana integer NOT NULL,
	tipo varchar(50) NOT NULL,
	valor decimal(2) NOT NULL,
	data_gasto date NOT NULL,
	CONSTRAINT grana_fk FOREIGN KEY (id_grana) REFERENCES Grana (id_grana) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE TABLE IF NOT EXISTS Pessoa(
	id_pessoa serial PRIMARY KEY,
	nome varchar(50) NOT NULL,
	valor_gasto decimal(2) NOT NULL,
	percentual_gasto decimal(5) NOT NULl,
	id_usuario_criacao integer NOT NULL
);

CREATE TABLE IF NOT EXISTS Gasto_Pessoa(
	id_gasto_fk integer NOT NULL,
	id_pessoa_fk integer NOT NULL,
	CONSTRAINT gasto_fk FOREIGN KEY (id_gasto_fk) REFERENCES Gasto (id_gasto) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT pessoa_fk FOREIGN KEY (id_pessoa_fk) REFERENCES Pessoa (id_pessoa) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE TABLE IF NOT EXISTS TipoEmail(
	id_tipo_email integer NOT NULL;
	tipo varchar(50) NOT NULL;
);

CREATE TABEL IF NOT EXISTS Email(
	id_tipo_email integer NOT NULL;
	email varchar(50) NOT NULL;
	id_dono_email integer NOT NULL;
	CONSTRAINT id_tipo_email_fk (id_tipo_email) REFERENCES TipoEmail (id_tipo_email) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION,
);